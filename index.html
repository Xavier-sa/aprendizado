<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 700px;
            overflow: hidden;
        }

        header {
            background: #4a5568;
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .saldo-total {
            background: #f7fafc;
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .saldo-total h2 {
            color: #2d3748;
            font-size: 1.5rem;
        }

        .saldo-total .valor {
            font-size: 2rem;
            font-weight: bold;
            color: #2d3748;
            margin: 5px 0;
        }

        .saldo-total .positivo {
            color: #38a169;
        }

        .saldo-total .negativo {
            color: #e53e3e;
        }

        .form-container {
            padding: 20px;
        }

        .form-grupo {
            margin-bottom: 15px;
        }

        .form-grupo label {
            display: block;
            margin-bottom: 5px;
            color: #4a5568;
            font-weight: 500;
        }

        .form-grupo input,
        .form-grupo select {
            width: 100%;
            padding: 12px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-grupo input:focus,
        .form-grupo select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .tipo-transacao {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tipo-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tipo-btn.ativo {
            border-color: #667eea;
            background-color: rgba(102, 126, 234, 0.1);
        }

        .tipo-btn[data-tipo="receita"] {
            color: #38a169;
        }

        .tipo-btn[data-tipo="despesa"] {
            color: #e53e3e;
        }

        .botoes {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-adicionar {
            background: #48bb78;
            color: white;
        }

        .btn-adicionar:hover {
            background: #38a169;
        }

        .btn-limpar {
            background: #f56565;
            color: white;
        }

        .btn-limpar:hover {
            background: #e53e3e;
        }

        .filtros {
            padding: 15px 20px;
            background: #edf2f7;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filtros select {
            flex: 1;
            min-width: 150px;
            padding: 8px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
        }

        .lista-gastos {
            padding: 0 20px 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .lista-gastos h3 {
            margin-bottom: 15px;
            color: #2d3748;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .gasto-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f7fafc;
            border-radius: 8px;
            margin-bottom: 10px;
            animation: fadeIn 0.5s ease;
            border-left: 4px solid #4a5568;
        }

        .gasto-item.receita {
            border-left-color: #38a169;
        }

        .gasto-item.despesa {
            border-left-color: #e53e3e;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .gasto-info {
            flex: 1;
        }

        .gasto-descricao {
            font-weight: 500;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .gasto-categoria {
            font-size: 0.8rem;
            color: #718096;
            margin-top: 3px;
        }

        .gasto-valor {
            font-weight: bold;
            color: #2d3748;
        }

        .gasto-valor.receita {
            color: #38a169;
        }

        .gasto-valor.despesa {
            color: #e53e3e;
        }

        .gasto-data {
            font-size: 0.8rem;
            color: #a0aec0;
            margin-top: 3px;
        }

        .btn-excluir {
            background: none;
            border: none;
            color: #f56565;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 10px;
        }

        .sem-gastos {
            text-align: center;
            padding: 20px;
            color: #a0aec0;
        }

        @media (max-width: 480px) {
            .container {
                width: 95%;
            }

            header h1 {
                font-size: 1.5rem;
            }

            .botoes {
                flex-direction: column;
            }

            .filtros {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-money-bill-wave"></i> Controle Financeiro</h1>
            <p>Gerencie suas finanças de forma simples</p>
        </header>

        <div class="saldo-total">
            <h2>Saldo Total</h2>
            <div class="valor" id="total">R$ 0,00</div>
            <div id="status-saldo"></div>
        </div>

        <div class="form-container">
            <div class="tipo-transacao">
                <div class="tipo-btn ativo" data-tipo="despesa" onclick="selecionarTipo('despesa')">
                    <i class="fas fa-minus-circle"></i> Despesa
                </div>
                <div class="tipo-btn" data-tipo="receita" onclick="selecionarTipo('receita')">
                    <i class="fas fa-plus-circle"></i> Receita
                </div>
            </div>

            <div class="form-grupo">
                <label for="descricao">Descrição</label>
                <input type="text" id="descricao" placeholder="Ex: Salário, Almoço, Transporte">
            </div>

            <div class="form-grupo">
                <label for="valor">Valor (R$)</label>
                <input type="number" id="valor" placeholder="0,00" step="0.01" min="0">
            </div>

            <div class="form-grupo">
                <label for="categoria">Categoria</label>
                <select id="categoria">
                    <!-- Categorias de despesas -->
                    <option value="alimentacao" data-icon="fa-utensils">Alimentação</option>
                    <option value="transporte" data-icon="fa-bus">Transporte</option>
                    <option value="moradia" data-icon="fa-home">Moradia</option>
                    <option value="saude" data-icon="fa-heartbeat">Saúde</option>
                    <option value="educacao" data-icon="fa-book">Educação</option>
                    <option value="lazer" data-icon="fa-gamepad">Lazer</option>
                    <option value="compras" data-icon="fa-shopping-cart">Compras</option>
                    <option value="servicos" data-icon="fa-tools">Serviços</option>
                    <!-- Categorias de receitas -->
                    <option value="salario" data-icon="fa-money-check" class="receita">Salário</option>
                    <option value="freelance" data-icon="fa-laptop" class="receita">Freelance</option>
                    <option value="investimentos" data-icon="fa-chart-line" class="receita">Investimentos</option>
                    <option value="presente" data-icon="fa-gift" class="receita">Presente</option>
                    <option value="outros" data-icon="fa-ellipsis-h">Outros</option>
                </select>
            </div>

            <div class="form-grupo">
                <label for="data">Data</label>
                <input type="date" id="data">
            </div>

            <div class="botoes">
                <button class="btn-adicionar" onclick="adicionarTransacao()">
                    <i class="fas fa-plus"></i> Adicionar
                </button>
                <button class="btn-limpar" onclick="limparCampos()">
                    <i class="fas fa-eraser"></i> Limpar
                </button>
            </div>
        </div>

        <div class="filtros">
            <select id="filtro-tipo">
                <option value="todos">Todos os lançamentos</option>
                <option value="receita">Apenas receitas</option>
                <option value="despesa">Apenas despesas</option>
            </select>

            <select id="filtro-categoria">
                <option value="todos">Todas as categorias</option>
                <!-- Categorias de despesas -->
                <option value="alimentacao">Alimentação</option>
                <option value="transporte">Transporte</option>
                <option value="moradia">Moradia</option>
                <option value="saude">Saúde</option>
                <option value="educacao">Educação</option>
                <option value="lazer">Lazer</option>
                <option value="compras">Compras</option>
                <option value="servicos">Serviços</option>
                <!-- Categorias de receitas -->
                <option value="salario">Salário</option>
                <option value="freelance">Freelance</option>
                <option value="investimentos">Investimentos</option>
                <option value="presente">Presente</option>
                <option value="outros">Outros</option>
            </select>

            <select id="filtro-ordem">
                <option value="recentes">Mais recentes</option>
                <option value="antigos">Mais antigos</option>
                <option value="maior">Maior valor</option>
                <option value="menor">Menor valor</option>
            </select>
        </div>

        <div class="lista-gastos">
            <h3>Meus Lançamentos</h3>
            <ul id="lista-transacoes"></ul>
        </div>
    </div>

    <script>
        let transacoes = [];
        let total = 0;
        let tipoSelecionado = 'despesa';

        // Inicializa a data com a data atual
        document.getElementById('data').valueAsDate = new Date();
        
        // Atualiza as categorias baseadas no tipo selecionado
        atualizarCategorias();

        // Carrega transações do localStorage se existirem
        carregarTransacoes();

        function selecionarTipo(tipo) {
            tipoSelecionado = tipo;
            document.querySelectorAll('.tipo-btn').forEach(btn => {
                btn.classList.toggle('ativo', btn.dataset.tipo === tipo);
            });
            atualizarCategorias();
        }

        function atualizarCategorias() {
            const categoriaSelect = document.getElementById('categoria');
            const options = categoriaSelect.querySelectorAll('option');
            
            options.forEach(option => {
                if (option.className === 'receita') {
                    option.style.display = tipoSelecionado === 'receita' ? 'block' : 'none';
                } else if (!option.className) {
                    option.style.display = tipoSelecionado === 'despesa' ? 'block' : 'none';
                }
            });
            
            // Seleciona a primeira opção visível
            for (let i = 0; i < options.length; i++) {
                if (options[i].style.display !== 'none') {
                    categoriaSelect.selectedIndex = i;
                    break;
                }
            }
        }

        function adicionarTransacao() {
            const descricao = document.getElementById('descricao').value.trim();
            const valorInput = document.getElementById('valor').value;
            const categoria = document.getElementById('categoria').value;
            const data = document.getElementById('data').value;

            if (!descricao || !valorInput) {
                alert("Por favor, preencha a descrição e o valor.");
                return;
            }

            const valor = parseFloat(valorInput);
            if (isNaN(valor) || valor <= 0) {
                alert("Por favor, insira um valor válido.");
                return;
            }

            const valorFinal = tipoSelecionado === 'despesa' ? -valor : valor;

            const transacao = {
                id: Date.now(), // ID único baseado no timestamp
                descricao,
                valor: valorFinal,
                valorAbsoluto: valor,
                tipo: tipoSelecionado,
                categoria,
                data: data || new Date().toISOString().split('T')[0]
            };

            transacoes.push(transacao);
            total += valorFinal;

            atualizarInterface();
            salvarTransacoes();
            limparCampos();
        }

        function removerTransacao(id) {
            const transacao = transacoes.find(t => t.id === id);
            if (transacao) {
                total -= transacao.valor;
                transacoes = transacoes.filter(t => t.id !== id);
                atualizarInterface();
                salvarTransacoes();
            }
        }

        function limparCampos() {
            document.getElementById('descricao').value = '';
            document.getElementById('valor').value = '';
            document.getElementById('descricao').focus();
        }

        function atualizarInterface() {
            // Atualiza o total
            const totalElement = document.getElementById('total');
            totalElement.textContent = `R$ ${Math.abs(total).toFixed(2).replace('.', ',')}`;
            totalElement.className = `valor ${total >= 0 ? 'positivo' : 'negativo'}`;

            // Atualiza status do saldo
            const statusSaldo = document.getElementById('status-saldo');
            statusSaldo.textContent = total >= 0 ? "Saldo positivo" : "Saldo negativo";
            statusSaldo.className = total >= 0 ? "positivo" : "negativo";

            // Aplica filtros
            const filtroTipo = document.getElementById('filtro-tipo').value;
            const filtroCategoria = document.getElementById('filtro-categoria').value;
            const filtroOrdem = document.getElementById('filtro-ordem').value;

            let transacoesFiltradas = transacoes;

            // Filtra por tipo
            if (filtroTipo !== 'todos') {
                transacoesFiltradas = transacoesFiltradas.filter(t => t.tipo === filtroTipo);
            }

            // Filtra por categoria
            if (filtroCategoria !== 'todos') {
                transacoesFiltradas = transacoesFiltradas.filter(t => t.categoria === filtroCategoria);
            }

            // Ordena
            switch (filtroOrdem) {
                case 'recentes':
                    transacoesFiltradas.sort((a, b) => new Date(b.data) - new Date(a.data));
                    break;
                case 'antigos':
                    transacoesFiltradas.sort((a, b) => new Date(a.data) - new Date(b.data));
                    break;
                case 'maior':
                    transacoesFiltradas.sort((a, b) => Math.abs(b.valor) - Math.abs(a.valor));
                    break;
                case 'menor':
                    transacoesFiltradas.sort((a, b) => Math.abs(a.valor) - Math.abs(b.valor));
                    break;
            }

            // Atualiza a lista
            const lista = document.getElementById('lista-transacoes');
            lista.innerHTML = '';

            if (transacoesFiltradas.length === 0) {
                lista.innerHTML = '<div class="sem-gastos">Nenhum lançamento encontrado</div>';
                return;
            }

            transacoesFiltradas.forEach(transacao => {
                const item = document.createElement('div');
                item.className = `gasto-item ${transacao.tipo}`;

                const categorias = {
                    alimentacao: { nome: 'Alimentação', icone: 'fa-utensils' },
                    transporte: { nome: 'Transporte', icone: 'fa-bus' },
                    moradia: { nome: 'Moradia', icone: 'fa-home' },
                    saude: { nome: 'Saúde', icone: 'fa-heartbeat' },
                    educacao: { nome: 'Educação', icone: 'fa-book' },
                    lazer: { nome: 'Lazer', icone: 'fa-gamepad' },
                    compras: { nome: 'Compras', icone: 'fa-shopping-cart' },
                    servicos: { nome: 'Serviços', icone: 'fa-tools' },
                    salario: { nome: 'Salário', icone: 'fa-money-check' },
                    freelance: { nome: 'Freelance', icone: 'fa-laptop' },
                    investimentos: { nome: 'Investimentos', icone: 'fa-chart-line' },
                    presente: { nome: 'Presente', icone: 'fa-gift' },
                    outros: { nome: 'Outros', icone: 'fa-ellipsis-h' }
                };

                const dataFormatada = new Date(transacao.data).toLocaleDateString('pt-BR');
                const categoriaInfo = categorias[transacao.categoria] || { nome: transacao.categoria, icone: 'fa-ellipsis-h' };

                item.innerHTML = `
          <div class="gasto-info">
            <div class="gasto-descricao">
              <i class="fas ${categoriaInfo.icone}"></i> ${transacao.descricao}
            </div>
            <div class="gasto-categoria">${categoriaInfo.nome}</div>
            <div class="gasto-data">${dataFormatada}</div>
          </div>
          <div class="gasto-valor ${transacao.tipo}">
            ${transacao.tipo === 'despesa' ? '-' : '+'} R$ ${transacao.valorAbsoluto.toFixed(2).replace('.', ',')}
          </div>
          <button class="btn-excluir" onclick="removerTransacao(${transacao.id})">
            <i class="fas fa-trash"></i>
          </button>
        `;

                lista.appendChild(item);
            });
        }

        function salvarTransacoes() {
            localStorage.setItem('transacoes', JSON.stringify(transacoes));
            localStorage.setItem('total', total.toString());
        }

        function carregarTransacoes() {
            const transacoesSalvas = localStorage.getItem('transacoes');
            const totalSalvo = localStorage.getItem('total');

            if (transacoesSalvas) {
                transacoes = JSON.parse(transacoesSalvas);
            }

            if (totalSalvo) {
                total = parseFloat(totalSalvo);
            }

            atualizarInterface();
        }

        // Adiciona event listeners para os filtros
        document.getElementById('filtro-tipo').addEventListener('change', atualizarInterface);
        document.getElementById('filtro-categoria').addEventListener('change', atualizarInterface);
        document.getElementById('filtro-ordem').addEventListener('change', atualizarInterface);

        // Permite adicionar transação pressionando Enter
        document.getElementById('valor').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                adicionarTransacao();
            }
        });
    </script>
</body>

</html>